<!DOCTYPE html>
<html lang="zh-Hant" data-bs-theme="light">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>【替換標題】 - 模擬頁模板</title>
  <meta name="description" content="互動式教學模擬頁模板" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
  <style>
    .skip-link {position:absolute;left:-1000px;top:0;background:#000;color:#fff;padding:.5rem 1rem;z-index:1000;}
    .skip-link:focus {left:0;}
    :focus-visible {outline:3px solid #ff9800;outline-offset:2px;}
    canvas {max-width:100%;height:auto;display:block;background:#111;}
    .live-region {min-height:1.5em;}
  </style>
</head>
<body class="d-flex flex-column min-vh-100">
  <a href="#main" class="skip-link">跳到主內容</a>
  <header>
    <nav class="navbar navbar-expand-lg bg-body-tertiary" aria-label="頁面導覽">
      <div class="container-fluid">
        <a class="navbar-brand" href="../index.html" aria-label="返回首頁"><i class="fa-solid fa-arrow-left" aria-hidden="true"></i> 首頁</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navContent" aria-controls="navContent" aria-expanded="false" aria-label="切換導覽"><span class="navbar-toggler-icon"></span></button>
        <div class="collapse navbar-collapse" id="navContent">
          <ul class="navbar-nav me-auto mb-2 mb-lg-0">
            <li class="nav-item"><a class="nav-link" href="../index.html#physics">物理</a></li>
            <li class="nav-item"><a class="nav-link" href="../index.html#math">數學</a></li>
            <li class="nav-item"><a class="nav-link" href="../index.html#chemistry">化學</a></li>
          </ul>
          <button id="themeToggle" class="btn btn-outline-secondary" type="button" aria-pressed="false" aria-label="切換深淺主題"><i class="fa-solid fa-circle-half-stroke" aria-hidden="true"></i></button>
        </div>
      </div>
    </nav>
  </header>
  <main id="main" class="container py-3" tabindex="-1">
    <h1 class="h3 mb-3">【替換標題】</h1>
    <p class="mb-4">【簡短說明：此模擬展示什麼概念，學生可以調整哪些參數】</p>
    <div class="row g-4">
      <!-- Canvas / Visual Area -->
      <section class="col-12 col-lg-7" aria-labelledby="sec-visual">
        <h2 id="sec-visual" class="h5">模擬視覺區</h2>
        <div class="ratio ratio-16x9 mb-3">
          <canvas id="simCanvas" aria-label="互動模擬畫布" role="img"></canvas>
        </div>
        <div id="simStatus" class="live-region small" aria-live="polite" aria-atomic="true">狀態：尚未開始</div>
      </section>
      <!-- Control Panel -->
      <aside class="col-12 col-lg-5" aria-labelledby="sec-controls">
        <h2 id="sec-controls" class="h5">控制面板</h2>
        <form id="controls" class="needs-validation" novalidate>
          <fieldset class="mb-3">
            <legend class="fs-6">參數設定</legend>
            <div class="mb-3">
              <label for="param1" class="form-label">參數 1 (單位)</label>
              <div class="d-flex gap-2 align-items-center">
                <input type="range" id="param1" class="form-range flex-grow-1" min="0" max="100" step="1" value="50" aria-valuemin="0" aria-valuemax="100" aria-valuenow="50" aria-label="調整參數1">
                <input type="number" id="param1Num" class="form-control form-control-sm" style="width:6rem" value="50" aria-label="參數1數值輸入">
              </div>
            </div>
            <div class="mb-3">
              <label for="param2" class="form-label">參數 2 (單位)</label>
              <input type="number" id="param2" class="form-control" value="10" min="0" max="50" step="1" aria-label="參數2數值輸入">
            </div>
          </fieldset>
          <div class="btn-group mb-3" role="group" aria-label="模擬控制">
            <button type="button" id="btnStart" class="btn btn-primary" aria-pressed="false"><i class="fa-solid fa-play" aria-hidden="true"></i> 開始</button>
            <button type="button" id="btnPause" class="btn btn-warning" disabled><i class="fa-solid fa-pause" aria-hidden="true"></i> 暫停</button>
            <button type="button" id="btnReset" class="btn btn-outline-secondary"><i class="fa-solid fa-rotate-left" aria-hidden="true"></i> 重置</button>
          </div>
          <div class="form-check form-switch mb-3">
            <input class="form-check-input" type="checkbox" role="switch" id="reduceMotion" aria-label="減少動畫切換">
            <label class="form-check-label" for="reduceMotion">減少動畫</label>
          </div>
          <button type="button" class="btn btn-outline-info" data-bs-toggle="collapse" data-bs-target="#help" aria-expanded="false" aria-controls="help">
            <i class="fa-solid fa-circle-question" aria-hidden="true"></i> 操作說明
          </button>
          <div id="help" class="collapse mt-2">
            <div class="card card-body small">
              <strong>快捷鍵：</strong>
              <ul class="mb-2">
                <li><kbd>Space</kbd>：開始/暫停</li>
                <li><kbd>R</kbd>：重置</li>
                <li><kbd>← / →</kbd>：調整參數 1</li>
              </ul>
              <p class="mb-0">確保所有控制可透過鍵盤操作，焦點移動順序合理。</p>
            </div>
          </div>
        </form>
      </aside>
    </div>
    <!-- Theory / Explanation -->
    <section class="mt-4" aria-labelledby="sec-theory">
      <h2 id="sec-theory" class="h5">原理與公式</h2>
      <div class="accordion" id="theoryAccordion">
        <div class="accordion-item">
          <h3 class="accordion-header" id="headingOne">
            <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
              理論說明
            </button>
          </h3>
          <div id="collapseOne" class="accordion-collapse collapse show" aria-labelledby="headingOne" data-bs-parent="#theoryAccordion">
            <div class="accordion-body small">
              在此填入概念說明。可搭配公式：<span aria-hidden="true">E = m c<sup>2</sup></span><span class="visually-hidden">能量等於質量乘以光速平方</span>
            </div>
          </div>
        </div>
        <div class="accordion-item">
          <h3 class="accordion-header" id="headingTwo">
            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
              公式推導
            </button>
          </h3>
          <div id="collapseTwo" class="accordion-collapse collapse" aria-labelledby="headingTwo" data-bs-parent="#theoryAccordion">
            <div class="accordion-body small">在此放置公式推導步驟與說明。</div>
          </div>
        </div>
      </div>
    </section>
  </main>
  <footer class="mt-auto py-3 bg-light border-top small text-center" role="contentinfo">&copy; 2025 國中自然科學模擬動畫</footer>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    // 主題切換
    const toggleBtn = document.getElementById('themeToggle');
    function setTheme(theme){
      document.documentElement.setAttribute('data-bs-theme', theme);
      localStorage.setItem('theme', theme);
      toggleBtn.setAttribute('aria-pressed', theme === 'dark');
    }
    const saved = localStorage.getItem('theme');
    if(saved){setTheme(saved);} else if(window.matchMedia('(prefers-color-scheme: dark)').matches){setTheme('dark');}
    toggleBtn.addEventListener('click', () => {
      const current = document.documentElement.getAttribute('data-bs-theme') || 'light';
      setTheme(current === 'light' ? 'dark' : 'light');
    });

    // 參數同步 (range + number)
    const param1 = document.getElementById('param1');
    const param1Num = document.getElementById('param1Num');
    function syncParam1(fromRange){
      if(fromRange){param1Num.value = param1.value;} else {param1.value = param1Num.value;}
      param1.setAttribute('aria-valuenow', param1.value);
    }
    param1.addEventListener('input', ()=> syncParam1(true));
    param1Num.addEventListener('input', ()=> syncParam1(false));

    // 按鈕控制邏輯 (示範，可替換)
    const statusRegion = document.getElementById('simStatus');
    const btnStart = document.getElementById('btnStart');
    const btnPause = document.getElementById('btnPause');
    const btnReset = document.getElementById('btnReset');
    let running = false;
    btnStart.addEventListener('click', ()=> {
      running = true;
      btnStart.setAttribute('aria-pressed', 'true');
      btnStart.classList.add('btn-success');
      btnPause.disabled = false;
      statusRegion.textContent = '狀態：運行中';
    });
    btnPause.addEventListener('click', ()=> {
      running = false;
      btnStart.setAttribute('aria-pressed', 'false');
      btnStart.classList.remove('btn-success');
      statusRegion.textContent = '狀態：已暫停';
    });
    btnReset.addEventListener('click', ()=> {
      running = false;
      btnStart.setAttribute('aria-pressed', 'false');
      btnStart.classList.remove('btn-success');
      btnPause.disabled = true;
      statusRegion.textContent = '狀態：已重置';
    });

    // 快捷鍵支援
    document.addEventListener('keydown', (e) => {
      if(e.code === 'Space'){e.preventDefault(); btnStart.click();}
      if(e.key === 'R'){btnReset.click();}
      if(e.key === 'ArrowLeft'){param1.stepDown();syncParam1(true);} 
      if(e.key === 'ArrowRight'){param1.stepUp();syncParam1(true);} 
    });
  </script>
</body>
</html>
